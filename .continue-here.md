---
project: sc-ice-storm-news
status: in_progress
last_updated: 2026-01-26T10:30:00
---

<current_state>
AI-powered summary feature is implemented but not yet deployed. The API endpoint
(`/api/summary.py`) is ready, and `index.html` has been updated with enhanced PDF
export that calls the Claude API for executive summaries. Need to configure the
Anthropic API key in Vercel and deploy.
</current_state>

<completed_work>

- News crawler Python script with RSS parsing (Google News + local SC stations)
- Vercel serverless function `/api/crawl.py` for live news aggregation
- HTML dashboard with auto-refresh and manual refresh button
- PDF export with jsPDF (basic version working)
- AI summary endpoint `/api/summary.py` created - calls Claude API
- Enhanced PDF export in `index.html` - integrates AI summaries with:
  - Executive Summary
  - Key Impacts by Category (Power, Roads, Schools, Shelters, Emergency Response)
  - Critical Numbers
  - Recommended Actions
  - Resources & Contacts
  - Full News Article Details
- HTML entity cleanup (fixed &nbsp; and raw HTML in RSS descriptions)
- Compact header design (reduced from 30% to ~14% of screen)
- macOS launchd for hourly automated runs
</completed_work>

<remaining_work>

1. **Configure Anthropic API key in Vercel** (NEXT)
   - Run: `vercel env add ANTHROPIC_API_KEY`
   - Enter user's Claude API key when prompted

2. **Deploy to Vercel**
   - Add new files to git: `api/summary.py`, `.gitignore`
   - Commit changes
   - Deploy: `vercel --prod --yes`

3. **Test the AI-powered PDF export**
   - Verify /api/summary endpoint works
   - Test PDF export button generates proper document
</remaining_work>

<decisions_made>

- Used Claude API (claude-sonnet-4-20250514) for AI summaries
- Client-side PDF generation with jsPDF (no server-side dependencies needed)
- Fallback summary generation if API fails or no key configured
- PDF branded as "DR 153-26" with "Prepared By: Gary Pelletier"
- News sorted newest to oldest for disaster operations readability
</decisions_made>

<blockers>
- Need Anthropic API key configured in Vercel environment variables
- User confirmed "Use my Claude API key" - need to locate or have user provide
</blockers>

<context>
Building a news aggregation dashboard for American Red Cross disaster operations
during the South Carolina ice storm (DR 153-26). The app is deployed at
https://sc-ice-storm-news.vercel.app but the AI summary feature requires the
API key to be configured. The PDF export will show fallback content until
the API key is set up.

Key files:
- `/api/crawl.py` - Live news crawling endpoint
- `/api/summary.py` - AI summary endpoint (NEW, needs deployment)
- `index.html` - Main dashboard with PDF export
- `vercel.json` - CORS headers for iframe embedding
</context>

<next_action>
1. Ask user for their Anthropic API key OR check common locations
2. Run: `vercel env add ANTHROPIC_API_KEY` and paste the key
3. Stage and commit: `git add api/summary.py .gitignore index.html && git commit -m "feat: add AI-powered summary API for PDF export"`
4. Deploy: `vercel --prod --yes`
5. Test at https://sc-ice-storm-news.vercel.app
</next_action>

<resume_command>
To resume: Open this project and say "continue deploying the AI summary feature"
</resume_command>
</content>
</invoke>